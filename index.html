<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chúc mừng 20/10 🎀</title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<style>
  :root{
    --bg1:#ffd7ea;
    --bg2:#ffecf8;
    --accent:#ff6b9a;
    --accent-2:#ffb86b;
    --glass: rgba(255,255,255,0.85);
    --shadow: 0 20px 40px rgba(0,0,0,0.12);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: "Inter", "Arial", sans-serif;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    color:#222;
    overflow:hidden;
    -webkit-font-smoothing:antialiased;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }

  .card{
    width:100%;
    max-width:980px;
    background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.98));
    border-radius:22px;
    padding:36px;
    box-shadow: var(--shadow);
    position:relative;
    overflow:hidden;
  }

  header{
    display:flex;
    gap:16px;
    align-items:center;
  }
  .logo{
    width:72px;height:72px;border-radius:18px;
    background: radial-gradient(circle at 20% 20%, #fff5f9, #ffdff0 20%, transparent 21%),
                linear-gradient(135deg, #ff96b6, #ffec9a);
    display:flex;align-items:center;justify-content:center;
    font-size:34px; color:white; font-weight:700;
    box-shadow: 0 6px 18px rgba(255, 102, 160, 0.18), inset 0 -6px 18px rgba(255,255,255,0.12);
  }
  h1{font-size:28px;color:var(--accent);letter-spacing:0.3px}
  p.lead{color:#6b4764;margin-top:8px;font-weight:600}

  .stage{
    display:flex;
    gap:28px;
    margin-top:20px;
    align-items:center;
    justify-content:space-between;
    flex-wrap:wrap;
  }

  .left{
    flex:1 1 420px;
    min-width:280px;
  }

  .cta{
    display:flex;
    gap:12px;
    align-items:center;
    margin-top:18px;
  }

  .start-btn{
    background: linear-gradient(90deg,var(--accent), #ff8ec1);
    border:none;
    color:white;
    padding:18px 26px;
    font-size:18px;
    font-weight:700;
    border-radius:14px;
    cursor:pointer;
    box-shadow: 0 12px 30px rgba(255,105,160,0.18);
    transform-origin:center;
    transition: transform .18s ease, box-shadow .18s ease;
  }
  .start-btn:active{ transform: scale(.98) }
  .start-btn:hover{ transform: scale(1.03) }

  .hint{
    font-size:14px;color:#7d5a78;
    background: rgba(255,255,255,0.6);
    padding:10px 14px;border-radius:12px;
  }

  .preview{
    width:320px; height:420px; border-radius:18px;
    background: linear-gradient(180deg,#fff0f6,#fff9f9);
    display:flex;align-items:center;justify-content:center;
    box-shadow: 0 18px 50px rgba(170,60,120,0.12);
    flex-shrink:0;
    position:relative;
    overflow:hidden;
  }

  .card-heart{
    position:absolute; top:18px; right:18px;
    font-size:26px;
    transform: rotate(10deg);
    filter: drop-shadow(0 6px 12px rgba(255,120,160,0.18));
  }

  /* loading overlay */
  .loading-overlay{
    position:absolute; inset:0; background: rgba(255,255,255,0.0);
    display:flex; align-items:center; justify-content:center;
    pointer-events:none;
  }

  .loader-wrap{
    width:80%; max-width:540px; pointer-events:auto;
    display:flex;flex-direction:column;align-items:center;gap:18px;
  }

  .loading-bar-outer{
    width:100%; height:18px;background: rgba(0,0,0,0.06);
    border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.6);
  }
  .loading-bar-inner{
    height:100%;
    width:0%;
    background: linear-gradient(90deg,#ff6b9a,#ffd36f,#ffd3f0);
    border-radius:12px;
    box-shadow: 0 6px 18px rgba(255,105,160,0.12);
    transition: width .18s linear;
  }
  .loading-text{
    font-family: "Courier New", monospace;
    font-weight:700; color:#8b4e6e; font-size:18px;
    letter-spacing:1px;
    text-transform:lowercase;
  }

  /* final message screen */
  .message-screen{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
    background: linear-gradient(180deg, rgba(255,213,234,0.92), rgba(255,244,250,0.98));
    z-index:2000; opacity:0; pointer-events:none; transition:opacity .6s ease;
  }
  .message-screen.show{ opacity:1; pointer-events:auto }
  .message-box{
    width:92%; max-width:800px; padding:32px; border-radius:20px;
    background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.99));
    text-align:center; box-shadow: 0 30px 80px rgba(100,20,60,0.09);
    border: 1px solid rgba(255,255,255,0.6);
  }
  .message-title{
    font-size:34px; color:#ff4d8a; font-weight:900;
    margin-bottom:8px; letter-spacing:0.6px;
    text-shadow: 0 6px 20px rgba(255,110,160,0.08);
  }
  .message-sub{
    font-size:18px;color:#6b4a63;margin-bottom:18px;
  }
  .wish-lines{ font-size:18px;color:#5a3a52; line-height:1.7; margin-bottom:18px; font-weight:600 }
  .small-note{ font-size:13px;color:#7c5876 }

  /* falling hearts & confetti */
  .falling-layer{ position:fixed; inset:0; pointer-events:none; z-index:1500; overflow:hidden }
  .particle{
    position:absolute;font-size:20px;opacity:0.95;
    animation: fall linear forwards;
  }
  @keyframes fall{
    0%{ transform: translateY(-120px) rotate(0deg) scale(.6); opacity:0 }
    10%{ opacity:1; transform: translateY(0) rotate(30deg) scale(1) }
    100%{ transform: translateY(110vh) rotate(720deg) scale(.5); opacity:0.02 }
  }

  /* responsive */
  @media (max-width:720px){
    .stage{flex-direction:column-reverse;align-items:center}
    .preview{width:92%;height:360px}
    .left{width:100%}
  }
</style>
</head>
<body>
  <div class="card" role="main" aria-label="Chúc mừng 20/10">
    <header>
      <div class="logo">20</div>
      <div>
        <h1>Chúc mừng 20/10 — Ngày của những nàng xinh 💐</h1>
        <p class="lead">Click nút dưới để nhận lời chúc dễ thương nha!</p>
      </div>
    </header>

    <div class="stage">
      <div class="left">
        <div style="margin-top:8px; font-size:15px; color:#6b4a63;">
          <strong>Gửi tặng cô nàng đặc biệt:</strong> một chút ngọt, một chút hoa, và cả bầu trời yêu thương.
        </div>

        <div class="cta">
          <button class="start-btn" id="startBtn">Click nút này nè bạn ơi ✨</button>
          <div class="hint">Nhạc nền: từ liên kết bạn đã up — Catbox</div>
        </div>

        <div style="margin-top:18px; color:#7e5a76; font-size:14px">
          * Sau khi bấm, sẽ hiện loading tới 100% → hiện lời chúc kèm hiệu ứng rơi tim & confetti.
        </div>
      </div>

      <div class="preview" aria-hidden="true">
        <div class="card-heart">💘</div>
        <div style="text-align:center; padding:18px;">
          <div style="font-size:18px; color:#6b4a63; font-weight:700">Preview</div>
          <div style="margin-top:8px; color:#894867">Hoa + Tim + Âm nhạc</div>
          <div style="margin-top:22px; font-size:13px; color:#7d5a78">Dùng được trên GitHub Pages</div>
        </div>
      </div>
    </div>

    <!-- loading overlay (hidden initially) -->
    <div class="loading-overlay" id="loadingOverlay" aria-hidden="true" style="display:none;">
      <div class="loader-wrap">
        <div class="loading-text" id="loadingText">đang chuẩn bị lời chúc...</div>
        <div class="loading-bar-outer" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div class="loading-bar-inner" id="loadingBar"></div>
        </div>
        <div style="font-size:13px;color:#7c5876;text-align:center">Chờ xíu nha, tớ đang gói quà ảo cho cậu 🎁</div>
      </div>
    </div>
  </div>

  <!-- final message screen -->
  <div class="message-screen" id="messageScreen" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="message-box">
      <div style="font-size:46px">🌸</div>
      <div class="message-title">Chúc mừng 20/10!</div>
      <div class="message-sub">Gửi đến cô gái đặc biệt — người khiến ngày thường cũng rạng rỡ</div>

      <div class="wish-lines" id="wishLines">
        <div>💐 Chúc bạn luôn xinh tươi như hoa,</div>
        <div>✨ mỗi ngày đều ngập tràn nụ cười và niềm vui,</div>
        <div>🌟 mọi dự định học hành, công việc đều thuận lợi,</div>
        <div>💖 và luôn gặp may mắn trong chuyện tình cảm nữa nhé!</div>
      </div>

      <div class="small-note">— Gửi từ một người bạn muốn bạn cười thật nhiều hôm nay 🌷</div>
    </div>
  </div>

  <!-- falling particles layer -->
  <div class="falling-layer" id="fallingLayer" aria-hidden="true"></div>

  <!-- background audio (Catbox) -->
  <audio id="bgAudio" loop preload="auto">
    <source src="https://files.catbox.moe/tqi6f7.mov" />
    <!-- fallback text will be ignored by browsers but left for resilience -->
  </audio>

<script>
  // Elements
  const startBtn = document.getElementById('startBtn');
  const loadingOverlay = document.getElementById('loadingOverlay');
  const loadingBar = document.getElementById('loadingBar');
  const loadingText = document.getElementById('loadingText');
  const messageScreen = document.getElementById('messageScreen');
  const bgAudio = document.getElementById('bgAudio');
  const fallingLayer = document.getElementById('fallingLayer');

  // Attempt autoplay on load
  async function tryAutoPlay() {
    try {
      bgAudio.volume = 0.72;
      await bgAudio.play();
      console.log('Audio autoplay success');
    } catch (err) {
      console.log('Autoplay blocked or failed — will play on user interaction.', err);
    }
  }

  // Try autoplay once
  tryAutoPlay();

  // Utility to create falling particles
  function spawnParticles(count=22) {
    const emojis = ['💖','🌸','🌷','💐','🎀','✨','🌟','💕','💘'];
    const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
    for (let i=0;i<count;i++){
      const el = document.createElement('div');
      el.className = 'particle';
      el.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      const size = Math.random()*22 + 14; // px
      el.style.fontSize = size + 'px';
      const left = Math.random()*100; // vw
      el.style.left = left + 'vw';
      const delay = Math.random()*1.5;
      const dur = Math.random()*6 + 6;
      el.style.animationDelay = delay + 's';
      el.style.animationDuration = dur + 's';
      // slight horizontal movement using transform translateX via CSS var
      fallingLayer.appendChild(el);
      // remove when animation done
      setTimeout(()=> { if (el && el.parentNode) el.parentNode.removeChild(el); }, (delay + dur)*1000 + 200);
    }
  }

  // animate loading
  function runLoadingSequence() {
    loadingOverlay.style.display = 'flex';
    loadingOverlay.style.pointerEvents = 'auto';
    loadingOverlay.style.opacity = '1';

    // vivid loading text animation (changing)
    const msgs = [
      'đang gói quà xinh xắn...',
      'đang thả tim nhỏ nhỏ...',
      'đang bọc hoa ảo...',
      'đang soạn lời chúc dễ thương...',
      'sắp xong rồi nè...'
    ];

    let tick=0;
    const textInterval = setInterval(()=> {
      loadingText.textContent = msgs[tick % msgs.length];
      tick++;
    }, 800);

    // progressively fill bar to 100% in ~3500-4200ms
    const total = 3800 + Math.random()*800;
    const start = performance.now();
    function step(now){
      const elapsed = now - start;
      const pct = Math.min(100, (elapsed/total)*100);
      loadingBar.style.width = pct + '%';
      loadingBar.parentElement.setAttribute('aria-valuenow', Math.round(pct));
      if (pct < 100) {
        requestAnimationFrame(step);
      } else {
        clearInterval(textInterval);
        // small delay then reveal message
        setTimeout(()=> revealMessage(), 700);
      }
    }
    requestAnimationFrame(step);
  }

  // reveal final message
  function revealMessage(){
    // fade out the card area a bit for dramatic effect
    document.querySelector('.card').style.filter = 'brightness(.9) blur(.0px)';
    // hide loader overlay
    loadingOverlay.style.display = 'none';

    // Show particles lots
    spawnParticles(32);
    // show message screen with fade
    messageScreen.classList.add('show');
    messageScreen.setAttribute('aria-hidden','false');

    // gentle pulse to message box
    const box = document.querySelector('.message-box');
    box.animate([
      { transform: 'scale(.98)', opacity: 0 },
      { transform: 'scale(1.02)', opacity: 1 },
      { transform: 'scale(1)', opacity: 1 }
    ], { duration: 900, easing: 'cubic-bezier(.2,.9,.3,1)' });

    // sprinkle more particles a few times
    setTimeout(()=> spawnParticles(28), 600);
    setTimeout(()=> spawnParticles(18), 1200);
  }

  // On start button click: ensure audio playing, then run loading
  startBtn.addEventListener('click', async function(){
    // try to play audio (if blocked previously)
    try {
      await bgAudio.play();
    } catch(e){
      // fallback: resume on user gesture via older API
      try { bgAudio.play(); } catch(err) { console.log('Unable to auto-play even after click', err); }
    }

    // small visual feedback
    startBtn.disabled = true;
    startBtn.style.opacity = .86;
    startBtn.textContent = 'Đang chuẩn bị...';

    // run loading
    runLoadingSequence();
  });

  // Accessibility: allow Enter key to trigger button when focused
  startBtn.addEventListener('keyup', function(e){
    if (e.key === 'Enter' || e.key === ' ') startBtn.click();
  });

  // Optional: hide message when user taps anywhere on it (close)
  messageScreen.addEventListener('click', function(){
    // gentle close
    messageScreen.classList.remove('show');
    messageScreen.setAttribute('aria-hidden','true');
    // stop audio if you want (comment out if not)
    // bgAudio.pause();
  });

  // spawn a few gentle floating particles on bg periodically (decorative)
  setInterval(()=> spawnParticles(6), 1800);

  // If you want the page to try autoplay again when user interacts anywhere:
  function resumeIfNeeded(){
    if (bgAudio.paused) {
      bgAudio.play().catch(()=>{});
    }
  }
  ['click','touchstart','keydown'].forEach(ev => document.addEventListener(ev, resumeIfNeeded, {once:true, passive:true}));
</script>
</body>
</html>
